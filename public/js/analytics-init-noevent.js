"use strict";!function(e,c,a,n){var o,s=e.Client&&e.Client.ivid?e.Client.ivid:"",r="",d={},l=c.segment.visitorMCMIDTimeout||2e3,u=c.segment.timeout||3e3,g={},m={},p=new Promise(function(e,t){var n=u/100,i=setInterval(function(){window.analytics&&window.analytics.initialized?(e(),clearInterval(i)):n<0?(t("Segment did not load within ".concat(u," milliseconds.")),clearInterval(i)):n--},100)}),w={getBeaconValueFromElement:function(e){if(e&&e.dataset)return"".concat(e.dataset.templateId,"|").concat(e.dataset.comVersion,"|").concat(e.dataset.autoSel,"|").concat(e.dataset.instanceVersion)},keyValuePairsToObject:function(e){var i={};return e.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(e,t,n){i[t]=n}),i},getTimezone:function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},getPlugins:function(){for(var e=[],t=window.navigator.plugins,n=t.length,i=0;i<n;i+=1){var a=t[i],o={};o.description=a.description,o.filename=a.filename,o.name=a.name,o.version=a.version,e[i]=o}return e},getCategoryForLegacyPages:function(e){return e||("/"===document.location.pathname?"Homepage":0===document.location.pathname.indexOf("/tax-tips/")?"Articles":w.isProductsAndPricePage(document.location.pathname)?"Product and Pricing Pages":0===document.location.pathname.indexOf("/tax-tools/")?"Tools":0===document.location.pathname.indexOf("/microsite/")?"Microsite Pages":0===document.location.pathname.indexOf("/lp/")?"Campaign Landing Pages":"Other")},isProductsAndPricePage:function(e){return 0<=e.indexOf("/personal-taxes/")||0<=e.indexOf("/small-business-taxes/")},beautifyPath:function(e){return"/"===e?"homepage":e.replace(/[^a-zA-Z0-9 ]/g," ")},pluckVisitorIdFromSvi:function(){var e=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:"").split("|");return e[1]?e[1].split("[")[0]:null}},v=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t={campaign:d.cid?encodeURI(d.cid):null,experiment_ids:n.get(c.experience.cookieName||"tms")||null,ivid:s,is_amp:document.documentElement.hasAttribute("amp")?"yes":"no",org:"cg",page_experience:m.experienceAnalyticsName||null,page_language:document.documentElement.lang,previous_page:document.referrer,priority_code:n.get("priorityCode")||null,purpose:"mktg",scope:m.siteId,scope_area:o,scope_version:"".concat(m.siteId,":").concat("EMS~2.0")};return Object.assign(t,e)},f=function(){var e=document.querySelector("[data-com-type='page']"),t=v({type:"page",cms_locator:w.getBeaconValueFromElement(e),screen:m.pageId?m.pageId.trim():null});window.analytics.page(o,m.pageId,t,{browser_height:window.innerHeight,browser_width:window.innerWidth,browser_pixel_density:window.devicePixelRatio,browser_plugins:w.getPlugins(),browser_cookies_enabled:window.navigator.cookieEnabled,browser_encoding:(document.characterSet||"").toUpperCase(),browser_java_enabled:window.navigator&&window.navigator.javaEnabled&&window.navigator.javaEnabled(),browser_javascript_version:"",integrations:{"Adobe Analytics":{visitorId:w.pluckVisitorIdFromSvi(n.get("s_vi"))||null,marketingCloudVisitorId:r}},locale:window.navigator.language,platform:"web",event_schema_id:"urn:clickstream:".concat(m.siteId,":0_1:track_event.schema.json"),screen_color_depth:window.screen.colorDepth,screen_height:window.screen.height,screen_width:window.screen.width,timezone:w.getTimezone(),tracking_application_name:c.segment.trackingApplicationName,tracking_application_version:"1",url_host_name:window.location.hostname,url_query_param:document.location.search})},i=function(e){var t="no page data-com-id",n="no parent data-com-id",i="not a template",a=e.currentTarget.parentNode.closest("[data-com-id]"),o=e.currentTarget.closest("[data-com-type='page']"),r=e.currentTarget.text;return e.currentTarget.dataset.comId&&(i=w.getBeaconValueFromElement(e.currentTarget)),a&&(n=w.getBeaconValueFromElement(a)),o&&(t=w.getBeaconValueFromElement(o)),v({parentComponentTemplateData:n,pageTemplateData:t,templateData:i,textValue:r})},h=function(e){window.analytics.track("Click",i(e))},b=function(e){e&&window.TTCOM_Scripts&&window.TTCOM_Scripts.splunk&&window.TTCOM_Scripts.splunk.logMessage({url:"/api/v1/cse/jsError",prettyMessage:"Client-side unexpected analytics error!",logKey:"analyticsHandledException",logValue:e,errorMessage:"handledException",userAgent:navigator&&navigator.userAgent?navigator.userAgent:"",pageUrl:window.location&&window.location.href?window.location.href:""})},_=function(e){var t=e.split(/\?(.+)/)[1],n=w.keyValuePairsToObject("?".concat(t));return n.redirect_url?function(e,t){var n=[],i="".concat(e,"?"),a=Object.keys(t),o={};a.forEach(function(e){o[e]=decodeURIComponent(t[e])});var r="".concat(o.redirect_url);c.adobeVisitorApi.enabled&&(r+=g.appendVisitorIDsTo("?").substring(1));return r+="&ivid=".concat(s),o.redirect_url=r,a.forEach(function(e){n.push("".concat(e,"=").concat(encodeURIComponent(o[e])))}),i+=n.join("&")}(e.split("?")[0],n):e},y=function(){for(var e=document.querySelectorAll("a[href^='https://".concat("accounts.intuit.com","']")),t=e.length,n=0;n<t;n+=1){var i=e[n],a=_(i.getAttribute("href"));i.setAttribute("href",a)}},t=function(){var e,t,n,i;e=document.querySelector("[data-com-type='page']"),t=document.body.dataset||{},n={},e&&(n=e.dataset||{}),n.siteId=t.siteId,n.category=w.getCategoryForLegacyPages(n.category),n.pageId=n.routeId||n.pageName||w.beautifyPath(document.location.pathname),o=(m=n).category,d=w.keyValuePairsToObject(window.location.search),c.adobeVisitorApi.enabled?(i={trackingServer:c.adobeVisitorApi.trackingServer,trackingServerSecure:c.adobeVisitorApi.trackingServerSecure},c.adobeVisitorApi.cname.enabled&&(i.marketingCloudServer=c.adobeVisitorApi.trackingServer,i.marketingCloudServerSecure=c.adobeVisitorApi.trackingServerSecure),c.adobeVisitorApi.enabled&&window.Visitor&&(g=a.getInstance(c.adobeVisitorApi.marketingCloudOrgId,i),window.visitor=g),new Promise(function(t,e){if(g&&g.getVisitorValues){var n=setTimeout(function(){e("AdobeVisitorApi visitor.getVisitorValues took longer than ".concat(l,"ms to return a response."))},l);g.getVisitorValues(function(e){clearTimeout(n),t(e.MCMID)},[g.FIELDS.MCMID])}else e("window.visitor and/or window.visitor.getVisitorValues is not defined")}).then(function(e){p.then(function(){window.analytics.user().anonymousId(s),r=e,f(),y()}).catch(b)}).catch(function(e){b(e)})):(p.then(f).catch(b),y()),c.segment.clickTrackingEnabled&&function(){for(var e=document.querySelectorAll("a, button, .beacon-this"),t=e.length,n=0;n<t;n+=1)e[n].removeEventListener("click",h),e[n].addEventListener("click",h)}()};c.segment.enabled&&("loading"===document.readyState?document.addEventListener("DOMContentLoaded",t):t(),window.segment={trackEvent:function(e,t){window.analytics.track(e,i(t))}})}(window.Intuit,window.appVars,window.Visitor,window.Cookies);